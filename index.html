<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Acervo de Monte Sião</title>

    <style>
body {
    width: 100vw;
    overflow: auto;
    margin: 0;
    padding: 0;
    background-color:#26361c;
}

#upper {
  display: grid;
  width: 100vw;
  grid-template-columns: 1fr;
  height: fit-content;
}


.home {
  background-color: #26361c;
  position: relative;
  z-index: 0;
  content: ""; /* Create a pseudo-element */
  display: block;
  width: 100vw;
  height: 100vh;
}

.home::before{
  display: block;
  opacity: 0.4;
  position: absolute;
  width: 100vw;
}

.home-img{
  opacity: 0.4;
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  background-color: #d7d3d4;
}

.upperbar {
  background-color: #1b1b1b;
  opacity: 0.7;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
  width: 80vw;
  left: 10vw;
  top: 2vh;
  height: 8vh;
  position: relative;
}

.upperbar-item {
  font-family: Gotham;
  color: #cecece;
  margin: auto;
  text-align: center;
  font-size: 2vh;
  cursor: grab;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}

#home-grid{
  position: relative;
  z-index: 10;
  height: 70%;
  width: 100%;
  display: grid;
  grid-template-rows: 1fr;
  grid-template-columns: 1fr; 
}


.home-logo{
  width: 65%;
  height: auto;
  margin: auto;
}

#navegue {
  background-color:#26361c;
  position: relative;
  width: 70vw;
  height: 100vh;
  margin: auto;
}

#navegue-header{
  position: relative;
  text-align: center;
  font-family: "Viaoda Libre", serif;
  font-size: 5vh;
  font-weight: lighter;
  color: #edfbe4;
  height: 25vh;
  padding-top: 5vh;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */  
}

#navegue-grid{
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;
  text-align: center;
  gap: 1vh;
}

.navegue-item{
  font-family: Gotham;
  font-size: 5vh;
  padding-top: 5vh;
  color: #edfbe4;
  width: 20vh;
  height: 15vh;
  border-color: #edfbe4;
  border-style:solid;
  text-align: center;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
  background-position: center center;
  background-repeat: no-repeat;
  cursor: grab;
}

.setinha{
  display: inline;
}

#iniciativa {
  background-color:#dbd9da;
  position: relative;
  width: 100vw;
  height: 120vh;
}

#iniciativa-grid {
  background-color:#dbd9da;
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  width: 100vw;
  height: 120vh;
}

.iniciativa-header{
  position: relative;
  text-align: justify;
  font-family: "Viaoda Libre", serif;
  font-size: 6vh;
  color: #474546;
  height: 30vh;
  padding-top: 5vh;
}

.iniciativa-container{
  margin: 20px;
}

.iniciativa-text{
  text-align: justify;
  position: relative;
  font-family: Gotham;
  font-size: 3vh;
  font-weight: lighter;
  color: #474546;
}

.igrejinha{
  background-image: url("https://live.staticflickr.com/65535/54853312034_39fc460230_b.jpg");
  background-repeat: no-repeat;
  background-size: 100% 100%;
}

.carousel-dots {
  top: 90vh;
  left: 20vw;
  width: 20vw;
  position: relative;
  display: flex;
  gap: 1rem;
  padding: 1rem;
}

.carousel-dots .dot {
  --size: 4rem;
  padding: 0;
  font-size: 0;
  color: transparent;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  width: var(--size);
  height: var(--size);
  cursor: grab;
}

.carousel-dots .dot.active {
  background-color: #474546;
}

#search {
  position: relative;
  width: 100%;
  height: 35vh;
  background-color: black;
  visibility: collapse;
  display: none;
}

#search-grid{
  display: grid;
  grid-template-columns: 50vw 1fr 8vw 30vw 1fr;
  grid-template-rows: 1;
  padding-left: 1vw;
}


.search-acervo-grid{
  z-index: 10;
  display: grid;
  grid-template-rows: 7vh 1px 1fr;
  grid-template-columns: 1fr 5vw 7vw 5vw 1fr;
  grid-column: 1 / 1;
  grid-row: 1 / 1 ;
  margin-top: 5vh;
}


#search-box {
    background-color:black;
    border: 6px solid white;
    color: white;
    font-size: 3vh;
    font-family: Gotham;
    font-weight: lighter;
    z-index: 20;
    height: 6vh;
    width: 30vw;
    text-align: center;
    margin: auto;
    grid-column: 2 / 2;
    grid-row: 1 / 1;
    visibility: collapse;
    cursor: auto;
}

 #search-box:focus {
  border: 10px solid white;
  background-color: black;
}

#search-button{
  width: 5vw;
  height: 7vh;
  object-fit: cover;
  grid-row: 1 / 1;
  grid-column: 3 / 4 ;
  text-align: center;
  margin: auto;
  background-color: white;
  cursor: grab;
}

#search-logo{
  cursor: grab;
  z-index: 100;
}

#lupa{
  width: 100%;
  height: 100%;
}

#outer-container {
  width: 100vw;
  background-color: whitesmoke;
  display: grid;
  grid-template-columns: 11vw auto;
  margin: 0;
  padding: 0;
  row-gap: 0;
  column-gap: 0;
}

#sidebar {
  margin: 0;
  padding: 0;
  row-gap: 0;
  column-gap: 0;
  left: 0;
  top: 0;
  width: 10vw;
  background-color: #d7d3d4;
}

.img-column{
  width: 85vw;
}
  
.pagination{
  height: 7vh;
  font-family: Gotham;
  font-size: 5vh;
  color: black;
  text-align: center;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}

#pagination-controls{
  width: 20vw;
  display: grid;
  grid-template-columns: 5vw auto 5vw;
  margin: auto;
  text-align: center;
}

#pagination-input {
    background-color:black;
    border: 6px solid white;
    color: white;
    font-size: 6vh;
    font-family: Gotham;
    font-weight: lighter;
    z-index: 20;
    height: 8vh;
    width: 8vw;
    text-align: center;
    margin: auto;
    cursor: auto;
}
  
.img-container {
  width: 85vw;
  row-gap: 1vw;
  column-gap: 1vw;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
}


.container {
  display: block;
  position: relative;
  font-size: 2vh;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  font-family: Gotham;
}

.attribute{
    font-family: Gotham;
    color: black;
    font-size: 2vh;
    margin: 1vh;
    -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}

.sidebarattribute{
  font-family: Gotham;
  color: black;
  height: 5vh;
  font-size: 2vh;
  padding-left: 2vw;
  cursor: grab;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}

.selected-filter {
  font-family: Gotham;
  color: white;
  background-color: black;
  border-radius: 30px;
  font-size: 2vh;
  height: 3vh;
  margin: auto;
  text-align: center;
  border-style: dotted;
  cursor: grab;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}
  

.dropdown-menu {
    display: none;
    position: absolute;
    background-color: white;
    margin-left: 10px;
    width: 160px;
    border-radius: 5px;
    z-index: 1;
    font-size: 2vh;
}

.dropdown-menu label {
    padding-left: 25px;
    padding-top: 3px;
    text-decoration: none;
    display: block;
}

/* Hide the browser's default radio button */
.container input {
  position: absolute;
  opacity: 0;
}

/* Create a custom radio button */
.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 20px;
  width: 20px;
  background-color: #eee;
  border-radius: 50%;
}

/* On mouse-over, add a grey background color */
.container:hover input ~ .checkmark {
  background-color: #ccc;
}

/* When the radio button is checked, add a blue background */
.container input:checked ~ .checkmark {
  background-color: black;
}

/* Create the indicator (the dot/circle - hidden when not checked) */
.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

/* Show the indicator (dot/circle) when checked */
.container input:checked ~ .checkmark:after {
  display: block;
}

/* Style the indicator (dot/circle) */
.container .checkmark:after {
 	top: 5px;
	left: 5px;
	width: 10px;
	height: 10px;
	border-radius: 50%;
	background: white;
}

.explore-button {
    outline: none;
    color: #6d1703;
    text-decoration: none;
    padding: 0.2em;
    padding-left: 0.2em;
    padding-right: 0.2em;
    background-color: #f0f194;
    border: none;
    border-radius: 100px;
    width: 40vw;
    box-shadow: 0 0 0 4px #f0f194, 2px 2px 4px 2px rgba(0, 0, 0, 0.5);
    transition: .1s ease-in-out, .4s color;
    font-family: Gotham;
    font-weight: lighter;
    font-size: 4vh;
    z-index: 20;
    text-align: center;
    margin: auto;
    grid-column: 2 / 6;
}
  
.explore-button:active {
    transform: translateX(0.1em) translateY(0.1em);
    box-shadow: 0 0 0 4px #d4da9c, 1.5px 1.5px 2.5px 1.5px rgba(0, 0, 0, 0.5);
}

.thumbnail {
    object-fit: cover;
    padding-top: 1vh;
    width: 15vw;
    height: 15vw;
    cursor: grab;
}

.description {
    font-family: Gotham;
    font-size: 2vh;
    color: rgb(52, 50, 50);
}

.card {
    background-color: whitesmoke;
    border: 2px inset #c0c0c0;
    text-align: center;
}

.cardattribute{
    font-family: Gotham;
    color: black;
    height: auto;
    font-size: 2vh;
    text-align: left;
    padding-left: 1vw;
}

#overlay {
  position: fixed; /* Sit on top of the page content */
  display: none; /* Hidden by default */
  width: 100vw; /* Full width (cover the whole page) */
  height: 100vh; /* Full height (cover the whole page) */
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.5); /* Black background with opacity */
  z-index: 200; /* Specify a stack order in case you're using a different order for other elements */
}

#overlay-img {
  position: absolute;
  background-size: cover;
  z-index: 10;
  top: 25%;
  left: 25%;
  cursor: grab;
}

#icon-container {
  width: 100px;
  right: 20px;
  display: grid;   
  grid-template-columns: auto;
  grid-template-rows: 100px;
}

.icon{
  z-index: 20;
  max-width: 100px;
  max-height: 100px;
  width: 10vw;
  height: 10vw;
  cursor: grab;
}

#bottom{
  height: 25vh;
  width: 100%;
  background-color: #1b1b1b;
  display: grid;
  grid-template-columns: 1fr 1fr;
}

.bottom-grid{
  position: relative;
  z-index: 10;
  display: grid;
  grid-template-rows: 10vh 1px 1fr;
  grid-template-columns: 1fr 5vw 5vw 5vw 1fr;
  margin-top: 2vh;
}

.contato{
  display: grid;
  grid-template-columns: 1fr;
  height: 15vh;
  margin: auto;
}

.contato-item{
  font-family: Gotham;
  color: #cecece;
  font-size: 2vh;
  cursor: grab;
  -webkit-user-select: none; /* Safari */
  -ms-user-select: none; /* IE 10 and IE 11 */
  user-select: none; /* Standard syntax */
}

.viaoda-libre-regular {
  font-family: "Viaoda Libre", serif;
  font-weight: 400;
  font-style: normal;
}

.mr-dafoe-regular {
  font-family: "Mr Dafoe", cursive;
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: GothamLight;
  src: url("./style/fonts/Gotham-Font/Gotham-Light.otf");
}

@font-face {
  font-family: GothamBlack;
  src: url("./style/fonts/Gotham-Font/Gotham-Black.otf");
}
    </style>
</head>
<body>
    <div id="overlay">
        <div id="icon-container">
            <img id="zoom-in-button" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/zoom-mais.png" onclick="onZoomIn()">
            <img id="zoom-out-button" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/zoom-menos.png" onclick="onZoomOut()">
            <img id="home" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/fechar-foto.png" onclick="goHome()">
            <img id="left" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/pagina-anterior-do-acervo.png" onclick="left()">
            <img id="right" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/proxima-pagina-do-acervo.png" onclick="right()">
        </div>
        <img id="overlay-img" class="overlay-img">
    </div>

    <div id="upper">
        <!-- HOME -->
        <div id="home-container" class="home"> 
            <img id="home-img" class="home-img" src="https://acervomontesiao.org/wp-content/uploads/2025/10/Foto-Home-1.jpg">
            <div class="upperbar">
                <div class="upperbar-item"></div>
                <div class="upperbar-item"></div>
                <div class="upperbar-item"></div>
                <div class="upperbar-item" onclick="showAcervoAll()">Acervo</div>
                <div class="upperbar-item" onclick="showContato()">Contato</div>
            </div>
            <div id="home-grid">
                <img id="home-logo" class="home-logo" src="https://acervomontesiao.org/wp-content/uploads/2025/10/LogoSite.png">
            </div>
        </div>
        <!-- BUSCA -->
        <div id="search">
            <div id="search-grid">
                <img id="search-logo" src="https://acervomontesiao.org/wp-content/uploads/2025/10/LogoSite.png" onclick="showInicio()">
                <input id="search-box" type="text"> 
                <div id="search-button" onclick="onSearched()"><img id="lupa" src="https://acervomontesiao.org/wp-content/uploads/2025/10/lupa.png"></div>
            </div>
            <div id="outer-container">
                <div id="sidebar"></div>
                <div id="img-column" class="img-column">
                    <div id="img-container" class="img-container"></div>
                    <div id="pagination" class="pagination"></div>
                    <div id="pagination-controls" class="pagination-controls">
                        <img id="pagination-left" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/pagina-anterior-do-acervo.png" onclick="paginationLeft()">
                        <input id="pagination-input" type="text" onkeydown="validatePagInput()">
                        <img id="pagination-right" class="icon" src="https://acervomontesiao.org/wp-content/uploads/2025/11/proxima-pagina-do-acervo.png" onclick="paginationRight()">
                    </div>
                </div>
            </div>
        </div>
        <!-- NAVEGUE -->
        <div id="navegue">
            <div id="navegue-header">Navegue, explore e redescubra<br>Monte Sião através do tempo</div>
            <div id="navegue-grid"></div>
        </div>
        <!-- INICIATIVA -->
        <div id="iniciativa">
            <div id="iniciativa-grid">
                <div class="iniciativa-container">
                    <div class="iniciativa-header">
                        Uma iniciativa dedicada à preservação do patrimônio histórico e cultural da nossa querida cidade.
                    </div>
                    <p class="iniciativa-text">Bem-vindo ao acervo fotográfico histórico de Monte Sião, a primeira biblioteca dedicada a contar a trajetória da nossa cidade através de imagens únicas e inéditas.</p>
                    <p class="iniciativa-text">Este projeto nasceu do desejo de preservar e compartilhar a memória coletiva de Monte Sião, reunindo fotografias raras que documentam as transformações urbanas que moldaram nossa identidade.</p>
                    <p class="iniciativa-text">Aqui você encontrará registros exclusivos, muitos deles sendo apresentados ao público pela primeira vez.</p>
                    <p class="iniciativa-text">Este acervo público honra o olhar e a memória do professor e fotógrafo Cláudio Faraco, que dedicou muitos anos em registrar com carinho cada pedaço da cidade que ele tanto ama.</p>
                </div>
                <div id="igrejinha" class="igrejinha">
                      <ol id="carousel-dots" class="carousel-dots">
                        <li id="dot1" class="dot active" onclick="fotoCarrossel1()">1</li>
                        <li id="dot2" class="dot" onclick="fotoCarrossel2()">2</li>
                        <li id="dot3" class="dot" onclick="fotoCarrossel3()">3</li>
                        <li id="dot4" class="dot" onclick="fotoCarrossel4()">4</li>
                      </ol>
                </div>
            </div>
        </div>
        <!-- BOTTOM -->
        <div id="bottom">
            <div class="bottom-grid" id="bottom-grid">
                <img class="bottom-logo" id="bottom-logo" src="https://acervomontesiao.org/wp-content/uploads/2025/10/LogoSite.png">
            </div>
            <div id="contato" class="contato">
                <div class="contato-item"></div>
                <div id="termos" class="contato-item" onclick="">Termos e Condições</div>
                <div id="contato-item" class="contato-item" onclick="">Contato</div>
                <div id="inicio" class="contato-item" onclick="inicio()">Início</div>
                <div class="contato-item"></div>
            </div>
        </div>
    </div>


    <script>
class ImgMetadata {
    constructor(year, decade, region, author, category,
         description, source, preservation, resolution,
         format, id, keywords, hlink, hlinksmall, index) {
        this.year = year;
        this.decade = decade;
        this.region = region;
        this.author = author;
        this.category = category;
        this.description = description;
        this.source = source;
        this.preservation = preservation;
        this.resolution = resolution;
        this.format = format;
        this.id = id;
        this.keywords = keywords;
        this.hlink = hlink;
        this.hlinksmall = hlinksmall;
        this.index = index;
    }
}
        


const sheetId = '1gENPiJwJxPRm4GC1XcMnbSeXhuZkgxIaZ-TtQSwqKc8';
const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
const sheetName = 'metadados';
const ColunaA = "Imagem"
const ColunaB = "Sequência"
const ColunaC = "Código identificador"
const ColunaD = "Categoria"
const ColunaE = "Ano"
const ColunaF = "Década"
const ColunaG = "Bairro/Região"
const ColunaH = "Autoria"
const ColunaI = "Fonte Original"
const ColunaJ = "Tema"
const ColunaK = "Estado de Conservação"
const ColunaL = "Descrição"
const ColunaM = "Resolução"
const ColunaN = "Formato"
const ColunaO = "Palavras-chave"
const ColunaP = "Link"
const ColunaQ = "Link pequeno"
const ColunasGrid = 4;
const LinhasGrid = 4;
const ImagensPorPagina = ColunasGrid*LinhasGrid;


let data = [];
let searchedImages = [];
let allKeywords = [];
let allRegions = [];
let allDecades = [];
let allCategories = [];
let zoomLevel = 1;
let minZoomLevel = 0.5;
let maxZoomLevel = 10;
let zoomIncrement = 0.2;
let newPosX = 0,
    newPosY = 0,
    startPosX = 0,
    startPosY = 0;
let current = 0;
let currentPage = 1;

init()

function init() {
    loadImages();
    document.onkeydown = function (e) {
       processKeys(e);
    };
}

function processKeys(event) {
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    const zoomImgVisibility = zoomImage.style.visibility;
    if(zoomImgVisibility.localeCompare("visible") == 0) {
        const key = event.key;
        switch (key) {
            case "ArrowLeft":
                left();
                break;
            case "ArrowRight":
                right();
                break;
        }
    } 


    let searchBar = document.getElementById("search-box");
    const searchVisibility = searchBar.style.visibility;
    if(searchVisibility.localeCompare("visible") == 0) {
        const key = event.key;
        switch (key) {
            case "Enter":
                // Cancel the default action, if needed
                event.preventDefault();
                let paginationInput = document.getElementById("pagination-input");
                const pagVisibility = paginationInput.style.visibility;
                if (pagVisibility.localeCompare("visible")) {
                    validatePagInput();
                }
                onSearched();
                break;
        }
    } 

}

function mouseMove(e) {
    console.log("mouse move")
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    // calculate the new position
    newPosX = startPosX - e.clientX;
    newPosY = startPosY - e.clientY;
    // with each move we also want to update the start X and Y
    startPosX = e.clientX;
    startPosY = e.clientY;
    // set the element's new position:
    zoomImage.style.left = (zoomImage.offsetLeft - newPosX) + "px";
    zoomImage.style.top = (zoomImage.offsetTop - newPosY) + "px";
}

function loadImages() {
    var i = 0;
    console.log("INIT")
    const query = encodeURIComponent("Select A, C, D, E, F, G, H, I, O, P, Q")
    const url = `${base}&sheet=${sheetName}&tq=${query}`
    
    fetch(url)
    .then(res => res.text())
    .then(rep => {
        //Apaga textos adicionais e extrai so o JSON:
        const jsonData = JSON.parse(rep.substring(47).slice(0, -2));
        let colz = []
        //Extrai nome das colunas
        jsonData.table.cols.forEach((heading) => {
            let column = heading.label;
            colz.push(column)
        })
        //Extrai dados das linhas
        jsonData.table.rows.forEach((rowData) => {
            let imagemColA = "";
            let idColC = "";
            let categoriaColD = "";
            let anoColE = "";
            let decadaColF = "";
            let regiaoColG = "";
            let autoriaColH = "";
            let fonteOriginalColI = "";
            let temaColJ = "";
            let estadoColK = "";
            let descColL = "";
            let resolucaoColM = "";
            let formatoColN = "";
            let palavraChaveColO = "";
            let linkBigColP = "";
            let linkSmallColQ = "";
            colz.forEach((ele, ind) => {
            if (rowData.c[ind] != null && rowData.c[ind].v != null) {
                if (ele == ColunaA) {
                    imagemColA = String(rowData.c[ind].v)
                } else if (ele == ColunaB) {
                    console.log("Seq ", rowData.c[ind].v)
                } else if (ele == ColunaC) {
                    idColC = String(rowData.c[ind].v)
                } else if (ele == ColunaD) {
                    categoriaColD = String(rowData.c[ind].v)
                } else if (ele == ColunaE) {
                    anoColE = String(rowData.c[ind].v);
                } else if (ele == ColunaF) {
                    decadaColF = String(rowData.c[ind].v);
                } else if (ele == ColunaG) {
                    regiaoColG = String(rowData.c[ind].v);
                } else if (ele == ColunaH) {
                    autoriaColH = String(rowData.c[ind].v);
                } else if (ele == ColunaI) {
                    fonteOriginalColI = String(rowData.c[ind].v);
                } else if (ele == ColunaJ) {
                    temaColJ = String(rowData.c[ind].v);
                } else if (ele == ColunaK) {
                    estadoColK = String(rowData.c[ind].v);
                } else if (ele == ColunaL) {
                    descColL = String(rowData.c[ind].v);
                } else if (ele == ColunaM) {
                    resolucaoColM = String(rowData.c[ind].v);
                } else if (ele == ColunaN) {
                    formatoColN = String(rowData.c[ind].v);
                } else if (ele == ColunaO) {
                    palavraChaveColO = String(rowData.c[ind].v);
                } else if (ele == ColunaP) {
                    linkBigColP = String(rowData.c[ind].v)
                } else if (ele == ColunaQ) {
                    linkSmallColQ = String(rowData.c[ind].v)
                }
            }    
        })
        if (linkBigColP != "" && linkSmallColQ != "") {
            let img = new ImgMetadata(anoColE, decadaColF, regiaoColG, autoriaColH, 
                                categoriaColD, descColL, fonteOriginalColI,
                                estadoColK, resolucaoColM, formatoColN, idColC,
                                palavraChaveColO, linkBigColP, linkSmallColQ, i);
            allCategories.push(categoriaColD);
            allCategories = allCategories.filter((e, i, self) => i === self.indexOf(e));
            allDecades.push(decadaColF);
            allDecades = allDecades.filter((e, i, self) => i === self.indexOf(e));
            let regs = regiaoColG.split(separator);
            for (let k=0; k<regs.length; k++) {
                allRegions.push(regs[k]);
            }
            allRegions = allRegions.filter((e, i, self) => i === self.indexOf(e));
            let kwds = palavraChaveColO.split(separator);
            for (let k = 0; k < kwds.length; k++){
                allKeywords.push(kwds[k]);
            }
            allKeywords = allKeywords.filter((e, i, self) => i === self.indexOf(e));
            imagemColA = "";
            idColC = "";
            categoriaColD = "";
            anoColE = "";
            decadaColF = "";
            regiaoColG = "";
            autoriaColH = "";
            fonteOriginalColI = "";
            temaColJ = "";
            estadoColK = "";
            descColL = "";
            resolucaoColM = "";
            formatoColN = "";
            palavraChaveColO = "";
            linkBigColP = "";
            linkSmallColQ = "";
            i = i+1;
            data.push(img)
        }
    })
     changeVisibilitySearch("collapse");
     populateNavegue();
    })
}

function removeAccents(word) {
    return word.toLowerCase();
}

function getFirstImageFromDecade(decade) {
    for (let i=0; i<data.length; i++) {
        let dataDecade = data[i].decade;
        let hasDecade = decade != null;
        let foundDecade = hasDecade ? dataDecade.toLowerCase().includes(decade) : false;
        if (foundDecade) {
            return "url('" + data[i].hlinksmall + "')";
        }
    }
    return "";
}

function populateNavegue() {
    let navegueGrid = document.getElementById("navegue-grid");
    let thisDecades = [
        "1930",
        "1940",
        "1950",
        "1960",
        "1970",
        "1980",
        "1990",
        "2000",
        "2010",
        "2020",
    ];
    let decadesImgs = [
        "https://live.staticflickr.com/65535/54852409218_547f207b5e_m.jpg", // alt="Foto_1930"
        "https://live.staticflickr.com/65535/54852409213_2a5a52a163_m.jpg", // alt="Foto_1940"
        "https://live.staticflickr.com/65535/54851286197_c44ff779af_m.jpg", // alt="Foto_1950"
        "https://live.staticflickr.com/65535/54851286162_6ef4ec7f90_m.jpg", // alt="Foto_1960"
        "https://live.staticflickr.com/65535/54852454290_f5c82af5fe_m.jpg", // alt="Foto_1970"
        "https://live.staticflickr.com/65535/54851286157_c65f0db336_m.jpg", // alt="Foto_1980"
        "https://live.staticflickr.com/65535/54852454275_a15ffb9a5b_m.jpg", // alt="Foto_1990"
        "https://live.staticflickr.com/65535/54852153026_ded5fdd273_m.jpg", // alt="Foto_2000"
        "https://live.staticflickr.com/65535/54852409183_a4bbdf29ce_m.jpg", // alt="Foto_2010"
        "https://live.staticflickr.com/65535/54852454255_60bfa203df_m.jpg", // alt="Foto_2020"
    ];

    for (let i=0; i<thisDecades.length; i++){
        let decadeButton = document.createElement('div');
        decadeButton.className = "navegue-item";
        decadeButton.innerText = thisDecades[i];
        decadeButton.onmouseover = function() {
            decadeButton.innerText = "";
            decadeButton.style.backgroundImage = "url(\"" + decadesImgs[i] + "\")";
        };
        decadeButton.onmouseout = function() {
            decadeButton.style.color = "white";
            decadeButton.style.backgroundImage = "";
            decadeButton.innerText = thisDecades[i];
            console.log(thisDecades[i])
        };
        decadeButton.onclick = function() {
            changeVisibilityOfAll("collapse");
            changeVisibilitySearch("visible");
            let searchBox = document.getElementById("search-box");
            let noAccent = removeAccents(thisDecades[i]);
            searchBox.innerHTML = noAccent;
            searchBox.value = noAccent;
            onSearched();
            showAcervo();
            inicio();
        };
        navegueGrid.appendChild(decadeButton);
    } 
    let spacersAmount = 3;
    for (let i=0; i<spacersAmount; i++) {
        let spacer = document.createElement("spacer");
        navegueGrid.appendChild(spacer);
    }
    let navegueButton = document.createElement("button");
    navegueButton.className = "explore-button";
    navegueButton.innerHTML = "EXPLORAR ACERVO COMPLETO 	<img class=\"setinha\" src=\"https:\/\/acervomontesiao.org\/wp-content\/uploads\/2025\/10\/Seta_botao-_Explorar-acervo_.png\"\/>";
    navegueButton.onclick = function() {
        searchedImages = data;
        showAcervo();
    }
    navegueGrid.appendChild(navegueButton);
}

function showAcervo() {
    window.scrollTo(0, 0);
    changeVisibilityOfAll("collapse");
    changeVisibilitySearch("visible");
    populateSidebar(allKeywords);
    currentPage = 1;
    console.log("showAcervo")
    populateGrid();
}

function showAcervoAll() {
    searchedImages = data;
    showAcervo();
}

function showInicio() {
    changeVisibilityOfAll("visible");
    changeVisibilitySearch("collapse");
}

function showContato(){
    window.scrollTo(0, document.body.scrollHeight);
}


function changeVisibilityOfAll(visibility) {
    elementsToHide = ["home-grid", "home-img", "home-logo",
        "navegue", "navegue-header", "navegue-grid", 
        "iniciativa", "iniciativa-grid", 
        "carousel-dots",
        "bottom", "bottom-grid", "bottom-logo", "contato", "termos", "contato-item", "inicio"];
    for (let i=0; i<elementsToHide.length; i++) {
        let elem = document.getElementById(elementsToHide[i]);
        elem.style.visibility = visibility;
        if (visibility == "collapse") {
            elem.style.maxHeight = "0";
            if (elementsToHide[i] == "home-img") {
                elem.src = ""
                elem.style.height = "0";
                let home = document.getElementById("home-container");
                home.style.backgroundColor = "#000000";
                home.style.height = "0";
            }
        } else {
            elem.style.maxHeight = "none";
            if (elementsToHide[i] == "home-img") {
                elem.src = "https://acervomontesiao.org/wp-content/uploads/2025/10/Foto-Home-1.jpg";
                elem.style.height = "100vh";
                let home = document.getElementById("home-container");
                home.style.backgroundColor = "#26361c";
                home.style.height = "100vh";
            }
        }
    }
    elementsByClass = ["upperbar", "upperbar-item",
        "navegue-item", "iniciativa-container", "explore-button",
        "iniciativa-header", "iniciativa-text", "igrejinha", "carousel-dots", "dot", "dot active",
        "contato", "contato-item"];
    for (let i=0; i<elementsToHide.length; i++) {
        elems = document.getElementsByClassName(elementsToHide[i]);
        for (let j=0; j<elems.length; j++) {
            elems[j].style.visibility = visibility;
            if (visibility.localeCompare("collapse") == 0) {
                elems[j].style.maxHeight = "0";
            } else {
                elems[j].style.maxHeight = "none";
            }
        }
    }
}

function changeVisibilitySearch(visibility) {
    search = document.getElementById("search")
    if (visibility == "collapse") {
        search.style.display = "none";
    } else {
        search.style.display = "block";
    }
    upperBarElems = ["upperbar", "upperbar-item"]


    elementsToHide = ["search-box", "search-button", "search-logo",
        "outer-container", "sidebar", "pagination", "img-column",
        "img-container"];
    for (let i=0; i<elementsToHide.length; i++) {
        elem = document.getElementById(elementsToHide[i]);
        elem.style.visibility = visibility;
        if (visibility == "collapse") {
            elem.style.maxHeight = "0";
            elem.style.maxWidth = "0";
            for (let j=0; j<upperBarElems.length; j++){
                upper = document.getElementsByClassName(upperBarElems[j]);
                for (let k=0; k<upper.length; k++){
                    upper[k].style.visibility = "visible"
                }
            }
        } else {
            elem.style.maxHeight = "none";
            elem.style.maxWidth = "none";
            for (let j=0; j<upperBarElems.length; j++){
                upper = document.getElementsByClassName(upperBarElems[j]);
                for (let k=0; k<upper.length; k++){
                    upper[k].style.visibility = "collapse"
                }
            }
        }
    }
}

function populateGrid() {
    console.log("populate grid " + currentPage);
    let paginationInput = document.getElementById("pagination-input");
    paginationInput.innerHTML = currentPage;
    paginationInput.value = currentPage;
    let grid = document.getElementById('img-container');
    clear(grid);
    let pagination = document.getElementById('pagination');
    if (searchedImages.length > 0) {
        for (let i=(currentPage-1)*ImagensPorPagina;i<currentPage*ImagensPorPagina;i++) {
            if (i < searchedImages.length){
                createNewImage(searchedImages[i], grid);
            }
        }
        let totalPag = (currentPage*ImagensPorPagina-1) ;
        if ((currentPage*ImagensPorPagina-1)  > searchedImages.length) {
            totalPag = searchedImages.length
        }
        pagination.innerText = (1+(currentPage-1)*ImagensPorPagina) + " de " + totalPag + ", total " + searchedImages.length;
    } else {
        pagination.innerText = "nenhum resultado encontrado";
    }
}

function populateSidebar(allKeywords) {
    let sidebar = document.getElementById("sidebar");
    sidebar.innerHTML = "";
    let filtros = document.createElement('div');
    filtros.innerText = "Filtros";
    filtros.className = "attribute";
    sidebar.appendChild(filtros);

    // Adiciona bairro/regiao
    let regionHeader = document.createElement('div');
    regionHeader.className = "sidebarattribute";
    regionHeader.innerText = "Bairro/Região"
    regionHeader.onclick = function() {
        console.log("Clicked region header")
        let regionDiv = document.getElementById("regionDiv");
        if (regionDiv.style.display.localeCompare("block") == 0) {
            regionDiv.style.display = "none";
        } else {
            regionDiv.style.display = "block";
            document.getElementById("decadeDiv").style.display = "none";
            document.getElementById("keywordsDiv").style.display = "none";
            document.getElementById("categoryDiv").style.display = "none";
        }
    }
    let regionDiv = document.createElement('div');
    regionDiv.setAttribute("id", "regionDiv");
    regionDiv.className = "dropdown-menu";
    regionHeader.appendChild(regionDiv)
    allRegions.sort();
    for (let i=0; i<allRegions.length; i++){
        let label = document.createElement("label")
        label.innerText = allRegions[i];
        label.className = "container"
        let radioInput = document.createElement('input');
        radioInput.type = "radio";
        radioInput.value = allRegions[i];
        radioInput.name = "regions";
        radioInput.addEventListener('change', function (e) {
            if (this.checked) {
                let searchStr = removeAccents(allRegions[i]);
                let selectedElems = document.getElementsByClassName("selected-filter");
                for (let j=0; j<selectedElems.length; j++) {
                    searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                }
                let searchBox = document.getElementById("search-box");
                searchBox.innerHTML = searchStr;
                searchBox.value = searchStr;
                onSearched();
                let selectedFilter = document.createElement("div");
                selectedFilter.innerText = allRegions[i];
                selectedFilter.className = "selected-filter";
                selectedFilter.onclick = function() {
                    selectedFilter.remove();
                    let searchStr = "";
                    let selectedElems = document.getElementsByClassName("selected-filter");
                    for (let j=0; j<selectedElems.length; j++) {
                        searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                    }
                    let searchBox = document.getElementById("search-box");
                    searchBox.innerHTML = searchStr;
                    searchBox.value = searchStr;
                    onSearched();
                }
                let closeFilter = document.createElement("img");
                closeFilter.src = 'https://acervomontesiao.org/wp-content/uploads/2025/11/fechar-foto.png';
                selectedFilter.appendChild(closeFilter);
                sidebar.appendChild(selectedFilter);
            }
        });
        label.appendChild(radioInput)
        let span = document.createElement("span");
        span.className = "checkmark"
        label.appendChild(span)
        regionDiv.appendChild(label)
    }
    sidebar.appendChild(regionHeader);

    // Adiciona categoria
    let categoryHeader = document.createElement('div');
    categoryHeader.className = "sidebarattribute";
    categoryHeader.innerText = "Categorias";
    categoryHeader.onclick = function() {
        let categoryDiv = document.getElementById("categoryDiv"); 
        if (categoryDiv.style.display.localeCompare("block") == 0) {
            categoryDiv.style.display = "none";    
        } else {
            document.getElementById("keywordsDiv").style.display = "none";
            document.getElementById("decadeDiv").style.display = "none";
            document.getElementById("regionDiv").style.display = "none";
            categoryDiv.style.display = "block";
        }
    }
    let categoryDiv = document.createElement('div');
    categoryDiv.setAttribute("id", "categoryDiv");
    categoryDiv.className = "dropdown-menu"
    categoryHeader.appendChild(categoryDiv)
    allCategories.sort();
    for (let i=0; i<allCategories.length; i++){
        let label = document.createElement("label")
        label.innerText = allCategories[i];
        label.className = "container"
        let radioInput = document.createElement('input');
        radioInput.type = "radio";
        radioInput.value = allCategories[i];
        radioInput.name = "categories";
        radioInput.addEventListener('change', function (e) {
            if (this.checked) {
                let searchStr = removeAccents(allCategories[i]);
                let selectedElems = document.getElementsByClassName("selected-filter");
                for (let j=0; j<selectedElems.length; j++) {
                    searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                }
                let searchBox = document.getElementById("search-box");
                searchBox.innerHTML = searchStr;
                searchBox.value = searchStr;
                onSearched();
                let selectedFilter = document.createElement("div");
                selectedFilter.innerText = allCategories[i];
                selectedFilter.className = "selected-filter";
                selectedFilter.onclick = function() {
                    selectedFilter.remove();
                    let searchStr = "";
                    let selectedElems = document.getElementsByClassName("selected-filter");
                    for (let j=0; j<selectedElems.length; j++) {
                        searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                    }
                    let searchBox = document.getElementById("search-box");
                    searchBox.innerHTML = searchStr;
                    searchBox.value = searchStr;
                    onSearched();
                }
                sidebar.appendChild(selectedFilter);
            }
        });
        label.appendChild(radioInput)
        let span = document.createElement("span");
        span.className = "checkmark"
        label.appendChild(span)
        categoryDiv.appendChild(label)
    }
    sidebar.appendChild(categoryHeader);

    // Adiciona decada
    let decadeHeader = document.createElement('div');
    decadeHeader.className = "sidebarattribute";
    decadeHeader.innerText = "Década"
    decadeHeader.onclick = function() {
        let decadeDiv = document.getElementById("decadeDiv");
        if (decadeDiv.style.display.localeCompare("block") == 0) {
            decadeDiv.style.display = "none";
        } else {
            decadeDiv.style.display = "block";
            decadeDiv = document.getElementById("categoryDiv").style.display = "none";
            decadeDiv = document.getElementById("regionDiv").style.display = "none";
            decadeDiv = document.getElementById("keywordsDiv").style.display = "none";
        }
    }
    let decadeDiv = document.createElement('div');
    decadeDiv.className = "dropdown-menu";
    decadeDiv.setAttribute("id", "decadeDiv");
    decadeHeader.appendChild(decadeDiv);
    allDecades.sort();
    for (let i=0; i<allDecades.length; i++){
        let label = document.createElement("label")
        label.innerText = allDecades[i];
        label.className = "container"
        let radioInput = document.createElement('input');
        radioInput.type = "radio";
        radioInput.value = allDecades[i];
        radioInput.name = "decades";
        radioInput.addEventListener('change', function (e) {
            let searchStr = removeAccents(allDecades[i]);
            let selectedElems = document.getElementsByClassName("selected-filter");
            for (let j=0; j<selectedElems.length; j++) {
                searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
            }
            let searchBox = document.getElementById("search-box");
            searchBox.innerHTML = searchStr;
            searchBox.value = searchStr;
            onSearched();
            let selectedFilter = document.createElement("div");
            selectedFilter.innerText = allDecades[i];
            selectedFilter.className = "selected-filter";
            selectedFilter.onclick = function() {
                selectedFilter.remove();
                let searchStr = "";
                let selectedElems = document.getElementsByClassName("selected-filter");
                for (let j=0; j<selectedElems.length; j++) {
                    searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                }
                let searchBox = document.getElementById("search-box");
                searchBox.innerHTML = searchStr;
                searchBox.value = searchStr;
                onSearched();
            }
            sidebar.appendChild(selectedFilter);
        });
        label.appendChild(radioInput)
        let span = document.createElement("span");
        span.className = "checkmark"
        label.appendChild(span)
        decadeDiv.appendChild(label)
    }
    sidebar.appendChild(decadeHeader);

    // Adiciona palavras-chave
    let keywordsHeader = document.createElement('div');
    keywordsHeader.className = "sidebarattribute";
    keywordsHeader.innerText = "Palavras-chave"
    keywordsHeader.onclick = function() {
        let keywordsDiv = document.getElementById("keywordsDiv");
        if(keywordsDiv.style.display.localeCompare("block") == 0){
            keywordsDiv.style.display = "none";
        } else {
            document.getElementById("decadeDiv")
            document.getElementById("categoryDiv")
            document.getElementById("regionDiv")
            keywordsDiv.style.display = "block";
        }
    }
    let keywordsDiv = document.createElement('div');
    keywordsDiv.setAttribute("id", "keywordsDiv")
    keywordsDiv.className = "dropdown-menu";
    keywordsHeader.appendChild(keywordsDiv);
    allKeywords.sort();
    for (let i=0; i<allKeywords.length; i++){
        let label = document.createElement("label")
        label.innerText = allKeywords[i];
        label.className = "container"
        let radioInput = document.createElement('input');
        radioInput.type = "radio";
        radioInput.value = allKeywords[i];
        radioInput.name = "keywords";
        radioInput.addEventListener('change', function (e) {
            let searchStr = removeAccents(allKeywords[i]);
            let selectedElems = document.getElementsByClassName("selected-filter");
            for (let j=0; j<selectedElems.length; j++) {
                searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
            }
            let searchBox = document.getElementById("search-box");
            searchBox.innerHTML = searchStr;
            searchBox.value = searchStr;
            onSearched();
            let selectedFilter = document.createElement("div");
            selectedFilter.innerText = allKeywords[i];
            selectedFilter.className = "selected-filter";
            selectedFilter.onclick = function() {
                selectedFilter.remove();
                let searchStr = "";
                let selectedElems = document.getElementsByClassName("selected-filter");
                for (let j=0; j<selectedElems.length; j++) {
                    searchStr = searchStr + " " + removeAccents(selectedElems[j].innerText);
                }
                let searchBox = document.getElementById("search-box");
                searchBox.innerHTML = searchStr;
                searchBox.value = searchStr;
                onSearched();
            }
            sidebar.appendChild(selectedFilter);
        });
        label.appendChild(radioInput)
        let span = document.createElement("span");
        span.className = "checkmark"
        label.appendChild(span)
        keywordsDiv.appendChild(label)
    }
    sidebar.appendChild(keywordsHeader);

    let filtrosSelecionados = document.createElement('div');
    filtrosSelecionados.innerText = "Filtros selecionados:";
    filtrosSelecionados.className = "attribute";
    sidebar.appendChild(filtrosSelecionados);

}

function clear(grid) {
    while (grid.firstChild) {
        grid.removeChild(grid.lastChild);
    }
}

const separator = ";"

function hasKeywords(attr, toSearch){
    let keywords = attr.split(separator);
    for (let j=0; j<keywords.length; j++) {
        if(keywords[j].normalize('NFD').replace(/[\u0300-\u036f]/g, '').includes(toSearch.normalize('NFD').replace(/[\u0300-\u036f]/g, ''))) {
            return true;
        }
    }
    return false;
}

function onSearched() {
    let grid = document.getElementById('img-container');
    grid.style.display = "grid";
    
    let searchBox = document.getElementById("search-box");
    let toSearch = searchBox.value.replace(/^\s+|\s+$/gm,'');
    
    let paginationInput = document.getElementById("pagination-input");
    let pag = paginationInput.value.replace(/^\s+|\s+$/gm,'');
    
    if (toSearch.localeCompare("") == 0) {
        if (pag.localeCompare("") != 0) {
            return
        }
    }
    
    clear(grid);
    searchedImages = [];
    currentPage = 1;
    let pagInput = document.getElementById("pagination-input")
    pagInput.innerHTML = "1";
    pagInput.value = "1";
    let splitByWord = toSearch.split(" ");
    searchBox.value = "";
    
    for (let i=0; i<data.length;i++) {
        for (let j=0; j<splitByWord.length; j++) {
            let region = data[i].region;
            let hasRegion = region != null;
            let foundRegion = hasRegion ? region.toLowerCase().includes(splitByWord[j]) : false;
            let author = data[i].author;
            let hasAuthor = author != null;
            let foundAuthor = hasAuthor? author.toLowerCase().includes(splitByWord[j]) : false;
            let year = data[i].year;
            let hasYear = year != null;
            let foundYear = hasYear ? String(year).toLowerCase().includes(splitByWord[j]) : false;
            let decade = data[i].decade;
            let hasDecade = decade != null;
            let foundDecade = hasDecade ? decade.toLowerCase().includes(splitByWord[j]) : false;
            let category = data[i].category;
            let hasCategory = category != null;
            let foundCategory = hasCategory ? category.toLowerCase().includes(splitByWord[j]) : false;
            let desc = data[i].description;
            let hasDesc = desc != null;
            let foundDesc = hasDesc ? desc.toLowerCase().includes(splitByWord[j]) : false;
            let source = data[i].source;
            let hasSource = source != null;
            let foundSource = hasSource ? source.toLowerCase().includes(splitByWord[j]) : false;
            let preserv = data[i].preservation;
            let hasPreserv = preserv != null;
            let foundPreserv = hasPreserv? preserv.toLowerCase().includes(splitByWord[j]) : false;
            let res = data[i].resolution
            let hasRes = res != null;
            let foundRes = hasRes? res.toLowerCase().includes(splitByWord[j]) : false;
            let format = data[i].format;
            let hasFormat = format != null;
            let foundFormat = hasFormat? format.toLowerCase().includes(splitByWord[j]) : false;
            let id = data[i].id
            let hasID = id != null;
            let foundID = hasID ? id.toLowerCase().includes(splitByWord[j]) : false;
            if (foundYear ||
                foundDecade || 
                foundRegion || 
                foundAuthor || 
                foundCategory ||
                foundDesc ||
                foundSource ||
                foundPreserv ||
                foundRes ||
                foundFormat || 
                foundID ||
                hasKeywords(data[i].keywords.toLowerCase(), toSearch)) {
                    searchedImages.push(data[i]);
                }
            }
        }
        console.log("onSearched");
        populateGrid(); 
 }

function createNewImage(imgMetaData, grid) {
    let div = document.createElement('div');
    div.className = "card";
    let img = document.createElement('img');
    img.className = "thumbnail";
    img.src = imgMetaData.hlinksmall;
    img.alt = imgMetaData.keywords;
    img.title = imgMetaData.description;
    img.onclick = function() {
        showFull(imgMetaData.hlinksmall);
        current = imgMetaData.index;
    }
    div.appendChild(img);
    if (imgMetaData.description != "") {
        let descAttr = document.createElement("p");
        descAttr.className = "cardattribute";
        descAttr.innerHTML = "<b>Descrição:<b> " + imgMetaData.description;
        div.appendChild(descAttr);
    }
    if (imgMetaData.year != "") {
        let yearAttr = document.createElement("p");
        yearAttr.className = "cardattribute";
        yearAttr.innerHTML = "<b>Ano:<b> " + imgMetaData.year;
        div.appendChild(yearAttr);
    }
    if (imgMetaData.author != "") {
        let authorAttr = document.createElement("p");
        authorAttr.className = "cardattribute";
        authorAttr.innerHTML = "<b>Autoria:<b> " + imgMetaData.author;
        div.appendChild(authorAttr);
    }
    if (imgMetaData.category != "") {
        let categoryAttr = document.createElement("p");
        categoryAttr.className = "cardattribute";
        categoryAttr.innerHTML = "<b>Categoria:</b> " + imgMetaData.category;
        div.appendChild(categoryAttr);
    }
    if (imgMetaData.region != "" ) {
        let regionAttr = document.createElement("p");
        regionAttr.className = "cardattribute";
        regionAttr.innerHTML = "<b>Bairro/Região:</b> " + imgMetaData.region;
        div.appendChild(regionAttr);
    }
    if (imgMetaData.source != "") {
        let sourceAttr = document.createElement("p");
        sourceAttr.className = "cardattribute";
        sourceAttr.innerHTML = "<b>Fonte Original:</b> " + imgMetaData.source;
        div.appendChild(sourceAttr);
    }
    if (imgMetaData.keywords != "") {
        let keywordsAttr = document.createElement("p");
        keywordsAttr.className = "cardattribute";
        keywordsAttr.innerHTML = "<b>Palavras-chave:</b> " + imgMetaData.keywords;
        div.appendChild(keywordsAttr);
    }
    div.style.height = "auto";
    grid.appendChild(div);
}

function showFull(link) {
    zoomLevel = 1;
    newPosX = 0;
    newPosY = 0;
    startPosX = 0;
    startPosY = 0;
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    zoomImage.src = link;
    zoomImage.style.visibility = "visible";
    let overlay = document.getElementById("overlay");
    overlay.style.visibility = "visible";
    overlay.style.display = "block";
    resetPositionAndSize();
}

function resetPositionAndSize() {
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    let width = zoomImage.offsetWidth;
    let height = zoomImage.offsetHeight;
    if (width > height) {
        zoomImage.style.width = "50%";
        zoomImage.style.left = "25%";
        zoomImage.style.height = "auto";
        let windowHeight = window.innerHeight;
        let calculatedHeight =(windowHeight-zoomImage.offsetHeight)/2 
        zoomImage.style.top = calculatedHeight.toString() + "px";
    } else {
        zoomImage.style.top = "25%";
        zoomImage.style.height = "50%";
        zoomImage.style.width = "auto";
        let windowWidth = window.innerWidth;
        let calculatedWidth = (windowWidth-zoomImage.offsetWidth)/2
        zoomImage.style.left = calculatedWidth.toString() + "px";
    }
}

function left() {
    if (current-1 < 0) {
        current = searchedImages.length-1
    } else {
        current = Math.abs((current-1)%searchedImages.length);
    }
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    zoomImage.style.visibility = "collapse";
    zoomImage.src = searchedImages[current].hlink;
    zoomLevel = 1;
    newPosX = 0;
    newPosY = 0;
    startPosX = 0;
    startPosY = 0;
    zoomImage.style.visibility = "visible";
    updateZoomedImage();
    resetPositionAndSize();
}

function right() {
    current = Math.abs((current+1)%(searchedImages.length));
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    zoomImage.style.visibility = "collapse";
    zoomImage.src = searchedImages[current].hlink;
    zoomLevel = 1;
    newPosX = 0;
    newPosY = 0;
    startPosX = 0;
    startPosY = 0;
    zoomImage.style.visibility = "visible";
    updateZoomedImage();
    resetPositionAndSize();
}

let dontHide = false;

function off() {
  if (dontHide) {
      dontHide = false;
      return;
  }
  document.getElementById("overlay").style.visibility = "collapse";
  let zoomImage = document.getElementsByClassName("overlay-img")[0];
  zoomImage.style.visibility = "collapse";
  zoomImage.src = "";
  zoomLevel = 1;
  newPosX = 0;
  newPosY = 0;
  startPosX = 0;
  startPosY = 0;
}

function goHome() {
    off();
}

function onZoomIn() {
    dontHide = true;
    if (zoomLevel < maxZoomLevel) {
        zoomLevel += zoomIncrement;
        zoomLevel = Math.min(zoomLevel, maxZoomLevel);
        updateZoomedImage();
    }
}

function onZoomOut() {
    dontHide = true;
    if (zoomLevel > minZoomLevel) {
        zoomLevel -= zoomIncrement;
        zoomLevel = Math.max(zoomLevel, minZoomLevel);
        updateZoomedImage();
    }
}

function updateZoomedImage() {
    let zoomImage = document.getElementsByClassName("overlay-img")[0];
    var imageWidth = zoomImage.offsetWidth;
    var imageHeight = zoomImage.offsetHeight;
    var newImageWidth = imageWidth * zoomLevel;
    var newImageHeight = imageHeight * zoomLevel;
    zoomImage.style.transform = 'scale(' + zoomLevel + ')';
    zoomImage.style.width = newImageWidth + 'px';
    zoomImage.style.height = newImageHeight + 'px';

    // when the user clicks down on the element
    zoomImage.addEventListener('mousedown', function(e) {
        e.preventDefault();
        // get the starting position of the cursor
        startPosX = e.clientX;
        startPosY = e.clientY;
        document.addEventListener('mousemove', mouseMove);
        document.addEventListener('mouseup', function() {
            document.removeEventListener('mousemove', mouseMove);
        });
    });
}


function inicio() {
    window.scrollTo(0, 0);
}

function fotoCarrossel1(){
    document.getElementById("igrejinha").style.backgroundImage = "url('https://live.staticflickr.com/65535/54853312034_39fc460230_b.jpg')";
    document.getElementById("dot1").classList = "dot active"
    document.getElementById("dot2").classList = "dot"
    document.getElementById("dot3").classList = "dot"
    document.getElementById("dot4").classList = "dot"
}

function fotoCarrossel2(){
    document.getElementById("igrejinha").style.backgroundImage = "url('https://live.staticflickr.com/65535/54853373975_83f42848d3_b.jpg')";
    document.getElementById("dot1").classList = "dot"
    document.getElementById("dot2").classList = "dot active"
    document.getElementById("dot3").classList = "dot"
    document.getElementById("dot4").classList = "dot"
}

function fotoCarrossel3(){
    document.getElementById("igrejinha").style.backgroundImage = "url('https://live.staticflickr.com/65535/54853373955_cba6d1e6be_b.jpg')";
    document.getElementById("dot1").classList = "dot"
    document.getElementById("dot2").classList = "dot"
    document.getElementById("dot3").classList = "dot active"
    document.getElementById("dot4").classList = "dot"
}

function fotoCarrossel4(){
    document.getElementById("igrejinha").style.backgroundImage = "url('https://live.staticflickr.com/65535/54853070411_1ba6a645fd_b.jpg')";
    document.getElementById("dot1").classList = "dot"
    document.getElementById("dot2").classList = "dot"
    document.getElementById("dot3").classList = "dot"
    document.getElementById("dot4").classList = "dot active"
}

function paginationLeft() {
    if (currentPage-1 <= 0) {
        currentPage = Math.ceil(searchedImages.length/ImagensPorPagina);
    } else {
        currentPage = currentPage-1;
    }
    console.log("current page " + currentPage);
    window.scrollTo(0, 0);
    populateGrid();
}

function paginationRight() {
    let upperLimit = (searchedImages.length/ImagensPorPagina);
    console.log(upperLimit);
    if (currentPage > upperLimit) {
        currentPage = 1;
    } else {
        currentPage = currentPage+1;
    }
    console.log("current page " + currentPage);
    window.scrollTo(0, 0);
    populateGrid();
}

function validatePagInput() {
    let paginationInput = document.getElementById("pagination-input");
    let value = paginationInput.value.replace(/^\s+|\s+$/gm,'');
    let valueNumber = Number(value);
    console.log("validate page input " + value + " "+isNaN(valueNumber))
    if (value != "") {
        console.log(valueNumber)
        currentPage = 1;
        if (isNaN(valueNumber)) {
            console.log("Reset");
        } else {
            console.log(valueNumber + " " + searchedImages.length/ImagensPorPagina)
            if (valueNumber > 0 && valueNumber < searchedImages.length/ImagensPorPagina) {
                currentPage = valueNumber;
            }
        }
        console.log("validate page input");
        populateGrid();
    } 
}
    </script>
</body>
</html>